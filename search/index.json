[{"content":"Overview 日志作为一种帮助开发者快速定位问题的工具，在各个开源项目以及实际生产环境中都被广泛使用，其重要性不言而喻。但是，开发者往往是懒惰的，在开发的过程中为了图省事，经常不写log（比如说我），或者写的log极其粗糙（诸如fmt.Println(\u0026quot;OK\u0026quot;)之流\u0026hellip;）。一旦程序出现了问题，根据现有的日志往往不能很好地定位到错误所在的地方，得花更多的时间打更多log（更是依托答辩）去找bug。\n痛定思痛，我打算来学习Log的Best Practice，让我之后debug不要再那么痛苦，写的日志不要再那么答辩🤡\n于是就有了本章Structured Log！\n什么是Structured Log 意思是结构化的日志，我觉得主要有以下特性：\n日志格式：从基于键-值（像syslog）到非常结构化和详细（像JSON）。数据越结构化——每行日志就越大，尽管更易于查询和包含更丰富的信息。 等级日志（或日志等级）：不同等级对应着不同重要性的日志。可见性可限制单个等级，仅限于某些重要性或等级以上的日志（如：仅记录WARN和更高等级）。通常日志等级在生产环境中是静态的，查找DEBUG等级的日志通常需要重新部署。 因果顺序：保存写入的实际时间 日志关联：能看到与特定请求或特定事件相关的所有日志，帮助我们深入到特定请求的相关信息中 Logrus Logrus是一个常用的日志库，有各种丰富的特性\n支持不同的日志等级 Trace、Debug、Info、Warning、Error、Fatal、Panic\n日志等级依次上升，可以通过SetLevel函数设置日志等级，比如：\n1 logrus.SetLevel(log.InfoLevel) 这样子只有Info等级及以上的日志会被打印\n可扩展的Hook机制 允许使用者通过Hook的方式将日志分发到任意地方，如`本地日志文件，logstash，elasticsearch或者mq等，或者通过Hook定义日志内容和格式\n可选的日志输出格式 内置了两种日志格式JSONFormater和TextFormater，还可以自定义日志格式\nFiled机制 可以通过Field机制进行结构化的日志记录，通常将一些字段始终加入到日志语句中会很有帮助\n相比于log.Fatalf(\u0026quot;Failed to send event %s to topic\u0026quot;, event, topic)\n使用如下的日志更加合适：\n1 2 3 4 log.WithFields(log.Fields{ \u0026#34;event\u0026#34;: event, \u0026#34;topic\u0026#34;: topic, }).Fatal(\u0026#34;Failed to send event.\u0026#34;) 除了WithField和WithFields添加的字段以外，一些字段会自动添加到所有日记记录中：\ntime：记录日志的时间戳 msg：记录的日志信息 level：记录的日志级别 线程安全机制 默认的logger在并发写的时候是受mutex保护的，也就是说是线程安全的\n","date":"2023-12-26T00:00:00Z","permalink":"https://blog.electronicwaste.cn/p/structured-log/","title":"Structured Log"},{"content":" 今晚是除夕夜，非常适合发这种总结性质的博客——辞旧迎新，2022不去，2023不来。\n从1月14日晚上答辩完正式放假之后，除开吃年夜饭、外出游玩和选购衣服所耗费的时间，我几乎将所有的时间精力投入到了搭建自己的博客中，不过在写完这篇博文之后就要告一段落了（也就是说我很久之后才会更新🐶）。\n那么，我们开始吧！\n前言 相信对每一个在交大或者在上海其它高校度过2022年的同学，都会觉得这是非常艰难的一年。\n三月份起上海前所未有的大面积封控刷新了武汉疫情以来的所有记录，作为上海疫情爆发最早的地方之一，交大首当其冲。正常的教学秩序被打乱，生存环境仿佛一下子倒退回了计划经济时代，社会中出现的种种乱象也一次又一次刷新我的三观\u0026hellip;这个世界天旋地转，也带着身处其中的我卷入其中——内心兵荒马乱，应对学业捉襟见肘，结束了一份破碎而又折磨的感情。\n都说，现实比小说更加魔幻，等我经历过这么一遭之后，才真正明白\u0026quot;艺术来源于生活\u0026quot;的真正含义\n苦难本身并不值得感谢，感谢的应该是勇敢面对苦难的自己\n那些痛苦的经历，消极负面的想法就不在我的年终总结里面分享了。我希望多年之后回望2022，更多想起的不是当时的苦难，而是面对苦难时勇敢的自己。\n与诸君共勉。\n大二上的尾巴 在我的印象里，大二上应该是我上大学以来最轻松的一个学期。相比于电院其它专业，我们不用学习数电模电还有电子技术实验，也没有工科创之类的焊板子造火箭课程，所以相对过得比较舒适。每天我都能睡得很爽，每周五都能和亲爱的室友Weijinglin同学在一起上完动漫课之后去打篮球😆，技术不佳的我一般只能通过身体优势碰瓷哈哈。\n在学习方面，由于在大二上有一波各专业的超级巨佬转入，我的学积分排名一下子从10%给干到了20%，当时还略微有些郁闷哈哈哈。不过后来想想对我也没太大影响，因为我也不是那种非得卷到前几不可的人，同时也没有这个实力。而且这样的排名对于“差不多就行了”性格的我来说，是比较舒适的，因为不用卷上天才能维持成绩，只需要平时认真学习好好做作业，期末熬夜肝一肝就行了（都是大学生了，不会有人期末不熬夜吧🐶）。\n同时让我意想不到的是大二上结束之后我达到了之后几个学期学积分排名的巅峰，刚好在15%的位置，我的信心可以说是来到了大学的巅峰哈哈哈。\n开开心心地回家过年！\n在封控中度过的春季学期 之前就总听学长说大二下是最折磨的一个学期，但当自己真正看到课表和各门课的课程要求才真真切切地感受到自己要完蛋了🤡\n各科课程：\n计算机系统基础(组成)：院长上的课，主要讲流水线、代码优化、存储、虚拟内存之类的偏底层的东西。一共有5个Lab，都很难😭，workload巨大，还有期中期末两次考试\n计算机系统基础(系统软件)：陈榕老师上的课，主要讲进程流控制、系统级I/O、网络以及一些并发相关的东西，一共有两个Lab，这门课workload还不算特别大（但是Network的那个Lab还是写得我想死😭）\n互联网应用开发技术：陈昊鹏老师开的课，感觉真的是我上过学以来接触到的信息密度最大的课程了，质量真的非常高！一个学期教你速通前端、后端和数据库，大作业硬核无比，要求开发一个电子书店，一共分为四次答辩——第一次答辩html+css的前端，第二次要求用React改写并完善相关页面，第三次要求前后端数据库贯通，第四次要求实现全部功能。老师也很会写代码，对html、css、javascript、java还有sql的理解都非常深入，遇到讲不清的问题就直接切IDE开始写代码，讲得真的是深入浅出！只要用心学都能学得会！但是workload真的好大😭😭😭,几次通宵都是因为这门课要答辩，遇到一些奇奇怪怪的bug(或者说是React的feature🐶)还得到处找博客看。在这里还得再次感谢两位室友Weijinglin和Waleve的救命之恩，不然我的代码根本写不完。\n软件工程原理：略微有点无语的课程，课上讲的是类图设计、软件开发过程之类的比较偏方法论的东西，但是感觉大二下上这门课还有点太早了，刚接触专业课的我们并不是很能理解这门课讲的内容的实际应用。而大作业也是和互联网课类似的，四人一组完成一个应用的开发。但不同的是这门课并不会教你如何写代码，也就是说得等互联网课上到相关内容之后才能开始写。也就是说互联网课的快乐翻倍了🐶，得同时多线开工，大G特G！\n高级数据结构：workload同样巨大的课程。每周都要根据上课内容实现一个具体的数据结构，并且对它们的性能进行测试对比，然后再交一篇实验报告。除此之外，还有ipads精心设计的4个lab和1个project，绝对酸爽！尤其是这个project，让我们写了一个LSM-Tree，bug真的是巨难de，实现也巨复杂，最后的实验报告还要用LaTex写，属实难顶。这门课真的是一节比六节强(16+4+1的作业量问你服不服)\n计算机中的数学基础：由三个老师分开来上，个人感觉讲得最好的是李国强老师，虽然我都听不懂哈哈，但是感觉听起来感觉很有条理，思路很清晰（是我愧对老师的教诲！😭)。第一部分是自动机，第二部分是凸优化，第三部分是数值计算。大作业基本都取消了，相关内容放到了期末考试，不过最后还是留了一个使用Python完成矩阵计算图像处理的lab，在我们寝室的小组分工之下较为顺利地完成了😋。但这门课真的挺难的，最后分数也挺烂的\u0026hellip;\n大学物理(A类)(3)：传说中的量子力学，由传说中带着口音的fsm老师上。很好奇是哪个领导拍脑门弄出来的课，工科居然还要学一个学期的量子力学。上课基本听不懂，考前全靠当了14年小镇做题家的应试能力才活过期末（最后考了99哈哈）\u0026hellip;\n毛概：不想多说，懂的都懂。\n事实上不出所料，果然完蛋了！\n但是出人意料的是，先完蛋的不是我，是交大😭\n3月9号那天醒来，看到群里老师发通知让去上早八的同学回宿舍，之后进行线上上课。当时还挺兴奋的哈，上蹿下跳，早八能躺床上上了干嘛不开心呢🐶？但是我是真的没想到疫情持续的时间会这么久。等下一次走出学校，就已经是7月份了；等下一次再线下，就已经是11月份了\u0026hellip;\n之后完蛋的是我🤡\n由于疫情原因，本就压力山大的大二下变得越来越糟糕。更要命的是我还作死报了托福，每周上一天的课。对！是整整一天（后来由于时间问题翘掉了好多）！慢慢的，考试开始来不及复习，从来准时交作业的我开始有大量的作业逾期。心情一天天变得十分糟糕，不再有动力去憧憬未来，也再不愿意去相信未来会有美好的生活。在早上很早被喊起来做核酸的时候经常有一种想死的冲动，面对困难的专业课产生了畏难的情绪而逃避，很多时候只是呆呆地坐着什么也不想干，思考着人生的终极奥义是什么\u0026hellip;多的就不说了，总之就是非常的折磨，不论是恶劣的外部环境，还是自己的精神内耗。\n或许也是这一段经历让我明白，以前自己一直追求的成绩、成功还有荣誉都是不值得一提的东西，没有什么比健康快乐更加的重要，三观也开始慢慢地发生变化。同时，我也看到了疫情之下普罗大众所经历的苦难，开始去思考一些社会现象背后的本质原因，开始对以往深信不疑的东西还有一些所谓政治正确的东西开始抱有怀疑的态度。可以说，成长了很多吧，希望再以后回忆起来的时候，能感受到自己这段时间的蜕变。\n世界上只有一种真正的英雄主义，那就是在认清了生活的真相之后依旧选择热爱生活\n之后照例是考试周，线上线下考不知道是哪个鬼才想出来的，为什么在教室里考试也要用电脑在线上答题啊？？？\n暑假 小学期课程 在期末周结束之后我们就马上转入小学期上课了😭\n什么？你问我那不是还有一个周末可以休息嘛？\n哈哈，我们有两次答辩分别在周六周日，几乎都快通宵了，哪来的时间休息🤡。一次是互联网电子书店的答辩，虽然没做完但还是蒙混过关了；另一次是软件工程原理与Weijinglin、Waleve还有Song-jq合作的Semo项目答辩，给老师骂的狗血喷头，“这有什么工作量”“欸，你这个怎么点不开”\u0026hellip;\n然后下一个星期一就开始上小学期的课了——《互联网产品设计与开发》，四学分，一共上四周，暑假回来答辩。我们小组的选题是实现一个在线虚拟形象聊天室，成员还是和上个学期Semo的阵容一样@Weijinglin@Waleve@Song-jq@Electronic-Waste。\n这一整个暑假我们都在写这个项目，中间遇到了重重难关。感觉最难的还是技术选型和需求定义这方面，其它的倒全部都是工程量的问题。在一系列的讨论之下，我们放弃了前端Unity+WebGL的实现思路，转移到了我们熟悉的React路线上，调用了一些现成的库实现前端虚拟形象的构建。还有关于我们要把软件做成什么样的问题，我们更是争辩了好久才确定下来（幸好没急着开始写代码，要不然就要大面积返工了）。\n此外通过暑假的项目学习，我们开始接触到了云服务器以及相关的配置（为我博客的建立打下了基础哈哈😆）。我们买了两台ECS，配置VPC把它们弄到一个网络里面，用NAT配置了出/入口流量规则，配置了SSL证书实现HTTPS协议通信，搭建了Nginx实现请求代理转发。虽然过程是痛苦的，但我也学到了很多有用的东西，和大家的合作也非常愉快！该正经的时候正经，该嬉笑打闹的时候绝不端着。\n情感波折 在暑假结束了一段早就该结束的痛苦而又折磨的感情，浑身都开始轻松起来了哈哈!\n第二天就和hxd@洲洲(bhys他没有Github账号😭)去温州市区玩了，K歌什么的哈哈，好开心！\n然后八月初我就回学校了，把学校里所有能承载之前那段记忆的东西全处理掉了，这几乎把我位置的东西全清空了。我拎着几袋处理掉的东西，毫不留恋地走向垃圾站，感觉自己仿佛迎来了新生。\n回到学校后的生活 在学校里迎来了自己的二十岁生日，那天没有发朋友圈也没有发QQ空间，而是静静地享受独处时光\n记得那天的晚霞很美很美，直逼35℃的气温也没能阻止我出去打球\n托福 因为之前报了托福，虽然后面已经放弃了出国的想法，但毕竟是2K+大洋🤡,实在无法做到直接不去考，于是就去苏州大学裸考了\n考前一晚上做了一套真题，第二天就匆匆上考场了，结果当然是很烂的😭\n烂到有点对不起我浙江高考英语140，四级645，六级605的成绩，就不放出来让大家看笑话了😭\n不管怎么说还是给之前自己出国的想法画上了一个句号，可能不是太圆满哈哈。之后可能再去补救一下，争取把这个句号画圆满。\n关于出国的问题：\n我无意评判保研/出国两条路的优劣，在我看来这两条路都很好。只是因为自己的人生目标发生了变化，感觉到保研更适合自己罢了。而且我感觉自己也不属于极度优秀的那种同学，也没有志向要在学术上有很高的造诣，因此出国对我来说不是一个必选项而是一个备选项。总的来说，自己还是比较希望安稳一些，留在国内开开心心的就好。\n军训\u0026amp;军训之后 说实话一开始挺讨厌军训的，也非常不喜欢这种形式主义的东西。但是交大的军训超级水，与其说是军训不如说是和大家在一起玩了14天，最后也挺开心的哈哈。最开心的是那个细雨蒙蒙拉练的夜晚，我们绕着学校走了一圈，一路走一路唱，感觉超级棒！\n一些小插曲是，我作为我们连队和女生连队联谊的代表，要和另外两个xd一起跳王心凌的《爱你》，场面一度十分尴尬哈哈哈。军训之后成为了大家口中的“爱你哥”，狠狠地刷了一波存在感😋\n视频就不放出来了，要脸哈哈哈\n军训结束之后便是我们《互联网产品设计与开发》这门课的答辩，答辩前5min我发现我写的部分出了一个bug可能导致整个页面崩溃，于是疯狂改代码，重新部署，在这期间让其它三个xd在腾讯会议室里面拖着老师直到我改完了Bug。真的又是一波极限操作🤡\n最后答辩的时候，虽然我们的代码有很多Bug，但是演示过程中竟然一点状况都没出，顺利完好地运行了下来！这真的是一个奇迹！\n最后也取得了非常满意的分数哈哈，和各位@Weijinglin@Waleve@Song-jq的合作非常愉快！\n梅开二度的秋季学期 谁能想到开学第一天交大就又GG了呢？🤡\n又一次线上上课，我们已经十分的熟练了，幸运的是我们楼栋并没有出现阳性病例，但不幸的是我的摆烂生活又开始了哈哈。\n这个学期的前半段没怎么学习，一个劲地放飞自我哈哈。为什么呢？因为可能感觉自己失去了努力奋斗的目标吧，如果只是为了读一个研究生，那么已经完全可以躺平了，基本已经不需要努力了。总而言之，就是处于一种混子的心态吧。\n不过课余生活是真的挺丰富的哈哈，反正就是除了学习什么都干🐶\n关于学习动力的后续\n找@洲洲聊了聊，开始认识到摆烂的危害性。如果以后要发展更多的爱好，必须要有更好的经济条件作为支撑，这需要持之不懈的努力；为了更好的生活质量，也需要努力。我开始慢慢地上道了，不过有点迟了，快学期结束了，已经开始出现ddl大面积逾期了😭。\n这个学期有三门比较硬核的课程：\n编译原理：前半部分由院长上，后半部分由吴明瑜老师上。主要讲的是现代编译器如何将代码转化为可执行的机器语言，以及其它的高级性质，包括词法分析、语义分析、类型检查、逃逸变量检测、代码翻译、机器语言生成还有寄存器分配，以及包括垃圾回收、函数式编程还有面向对象语言在内的高级性质。一共有8个Lab(lab5拆分成了两个)，前面3个Lab难度还好，后面5个Lab难度开始指数级上升，每个都要花费很多的时间精力😭，极其的硬核。但是感觉做完之后对能力尤其是debug的能力有很大的提升，此外还能学习到一些c++17之后的新特性以及STL库的使用，收获真的很多。感谢设计这个Lab的助教和老师，你们用心良苦，但无奈我实在太菜了😭，Lab延期了4个，作为bonus的Lab7我直接没写，实在是愧对你们。\n计算机系统工程：由夏虞斌老师和魏星达老师合上。主要讲文件系统、分布式事务处理、网络以及安全相关的内容，讲得比较杂，感觉属于通识类的东西，让你对计算机系统和分布式、网络、安全的知识有一定深入的了解。这门课的5个Lab也比较硬核（其中Lab2拆分为AB两个），实现了chfs文件系统、Atomicity、RPC\u0026amp;Lock server、Raft分布式系统以及基于Raft的MapReduce工具。可以说也十分的硬核，但做完之后会对其中的原理有更为深刻的认识。不出所料的，我又有好几个Lab延期了😭，现在真的想回去一巴掌拍死前半个多学期在摆烂的自己。夏老师和魏老师讲课讲的都很好，尤其是夏老师感觉很有人格魅力，很有幸能上到这样的课哈哈哈！\n应用系统体系架构：依旧是陈昊鹏老师开的课，依旧是十分的硬核。不过与上个学期的互联网课不同的是，这个学期的课讲的是小专题（意思是即使你上节课没听下节课也能听得懂）。内容很广，包括事务机制、消息机制、websocket、多线程编程、安全机制、Redis缓存、全文搜索、微服务架构、范式、数据库优化、Nosql数据库以及集群，共有12次作业，每次作业相当于在大二下实现的bookstore上进行一些小的优化。这门课从学期初到学期末，感觉就是在配置一堆奇奇怪怪的环境，而且配环境的时间远远长于真正写代码写文档的时间😭。真的是究极折磨！！！每次配环境都会给我整出一堆莫名其妙的问题，然后我就会疯狂从网上找博客，疯狂问老师问同学，和环境问题大战三百回合，一天从早上肝到晚上，有时候真的都快崩溃了。到了最后，就像选课社区的同学说的那样，由于一个学期配置的环境太多，以至于最后开bookstore就像开核弹一样哈哈哈。但yysy，这门课质量还是很高的，不仅可以学到一些优化互联网应用性能的策略和机制，还可以在配环境的过程中极大地磨练自己的心性和搜集资料（骚扰老师同学）的能力哈哈哈！也是强烈安利！😋\n总而言之，在这三门课的压迫之下（其中有一门是系统软件方向的选修课），我甚至感觉这学期过得比大二下还累😭。当然也有可能是因为我前面太摆烂了，导致作业全都压到了最后面。这些课真的让我开始怀疑自己到底适不适合学计算机了，我的自信心受到了疯狂的打击，一度想研究生换个专业读读(bushi)。\n此外，在疫情中，做了一年的PRP终于结束了。九月底在@WindowsXp学长远程的指导下调试完成了他开发的接收串口信号的安卓程序，并和我负责的NFC信号检测模块整合到了一起，顺带着水了5K字的论文。一路走来感觉挺不容易的，刚加入PRP项目组的时候是大一下结束的时候，当时还什么都不会，基本什么事情都是学长干的，我就负责UI设计、机械加工还有视频制作，开小组会议讨论的时候我基本啥都听不懂😭；后面接触了专业课之后开始能去写一些前后端程序，才能协助完成一些开发工作。其实一开始想出国有一部分原因也是受学长影响，一心想润的学长让我也对海的另一头产生了某种憧憬，不过后来还是发现自己可能没有这个实力。同时也挺感谢学长Github账号里各种各样的repo🐶，没有它们我可能真的活不下去，大家也可以去挖掘一下，说不定有意外收获哈哈。此外，我没有白嫖！\n好不容易向好的秋季学期 到十月底，我们开始恢复线下教学的秩序。到了上课的第一天，真的有一种莫名的感动，等这一天快等了八个月，而大学能有几个八个月？只希望以后不要再有线上课了，和老师同学线下面对面交流的感觉，不是冷冰冰的屏幕所能代替的。\n这段时间没发生什么大事，出校审批越来越松，我每天出校都用同样的理由。每天早上七点多起来去校外的健身房，然后回来赶每天十点的早课，日子别提多舒适了。不过这段时间感觉依旧有些摆烂，对作业仍不理不睬（作业：“你礼貌吗？”），事实证明作业也很快给我迎头痛击🤡\n不过这段时间，社会上倒是发生了很多事情，乌鲁木齐火灾、学长去世、二十条\u0026amp;新十条出台。我的感触也颇深。\n只有一声叹息\u0026hellip;\u0026hellip;\n始料未及的梅开三度 实在没想到一年里居然还能梅开三度，居然还能有幸见证重大的历史关头🤡这属实让我猝不及防\n由于学校的疫情逐渐失控，12月10号我就回到了家，蹦跶了几天哈哈哈（有人还没意识到作业的紧迫性）\n等我意识到事情的紧迫性时，离期末差不多就只有两周了🤡\n大家可以感受一下期末周前我到底有多少作业没写哈哈，反正就是紧赶慢赶才在考试前一天写完\n最后重考了一门机器学习，实在顶不住了。考完算法之后又在使劲赶逾期的编译Lab，直到答辩的前一夜才过完所有的测试点。答辩完那一刻我感觉整个人都轻松了——假期终于开始了，要过年了！爷 is free!!!我要打好多游戏，我要每天睡到中午起床，我要去挑我喜欢的新衣服！真的好激动！\n但不过，可以预见到的是，这学期的学积分排名会稀烂😭😭😭不过我倒是没有很难受，总有好的时候也有不好的时候，而且我感觉这样子对我来说也是一个警醒吧，让我看看摆烂的后果是什么😭\n最后，在期末周压力最大的时候，我从一个很好的人那里获得了精神动力。希望我以后也能一直开心，面对苦难险阻一直保持昂扬的精神状态！我想在这里谢谢你！\n展望 窗外的爆竹声不绝于耳，它预示着新的一年即将到来。与此同时我的年终总结也快写完了，回望我的2022，有很多痛苦和磨难，也有很多开心和快乐，但更有那个勇敢的自己！新年的钟声即将敲响，我在这里先给大家拜个早年了，大家新年快乐呀！\n展望2023，我希望天下不再有因疫情而起的苦难，希望自己不被困难打倒一直昂扬前进，希望人世少一些纷争多一些理解，希望诸君每天都能有一个好心情！\n同时，我也想给自己提一些具体的要求：\n下学期别摆烂了，好好学习！\n尽快明确自己的方向，及早规划自己的未来，对自己负责！\n真诚对待每一个向我寻求合理帮助的人，尽力所能及之事\n积极地去探索新的东西，走出舒适区，始终对生活保持热情\n爆竹声中一岁除，春风送暖入屠苏。\n新年要有新气象。各位，我们新年再见！\n","date":"2023-01-21T00:00:00Z","permalink":"https://blog.electronicwaste.cn/p/2022%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/","title":"2022年度总结"},{"content":"前言 这个博客使用Hugo+GithubPage+阿里云服务搭建完成。\n虽然我们专业在大二下开始就安排了互联网开发课程，涉及前端、后端、数据库以及服务器运维和项目管理，但是可能是由于从小缺乏美术细胞，我设计出来的UI界面巨丑无比😭，给大家直观感受一下：\n于是秉持着\u0026quot;用自己写的代码恶心自己可以，但不能恶心别人\u0026quot;的基本道德观念，我发扬了\u0026quot;造不如买，买不如租\u0026quot;的精神🐶，投入到了开源项目的怀抱。不得不说，大佬们设计的UI是真的好看。在千挑万选之下，我选择了hugo-theme-stack作为网站的主题，并采用Hugo作为build页面的工具。这样一来，搭建网站所耗费的时间精力就大大减小了，这拯救了我本来就不多的头发😭。\n与此同时，Github也提供了GithubPage服务，能在远端自动构建网页（这不就是一个免费的服务器嘛！不用白不用！）。操作也较为简单，只需要git push再简单配置一下就可以直接使用。于是又懒又穷的我就选用了GithubPage哈哈哈！\n此外，由于众所周知的原因，Github在国内的连接是不稳定的，可能会出现无法访问的情况。因此，我为GithubPage添加了阿里云提供的域名解析服务，这样能大大加快国内用户访问我的博客的速度，也能提高访问的稳定性。\n下面开始我们的教程部分：\nHugo安装与配置 安装部分较为简单，直接去Hugo Release下载与电脑环境相同的最新版本压缩包即可。由于我的电脑是Windows系统的，因此我下载的是与Windows系统适配的版本，而且之后所有配置本地环境的步骤均是在Windows环境下进行的。\n此外，我们需要注意各个theme对hugo版本的要求，例如我所采用的hugo-theme-stack的官方文档要求安装extented版本的hugo。具体的情况视所采用的主题不同而不同。\n安装完成后，我们需要在Windows的系统环境变量中添加hugo.exe所处目录的位置，以保证hugo能在Windows系统全局运行。\n这之后，我们就可以在新建的本地目录（用于本地构建网站）使用hugo创建新的样例网站啦！\n1 2 $ hugo new site . # 在当前目录下创建 $ hugo server # 在本地1313端口构建网站 然后打开localhost:1313就能看到丐版的网页了！\nStack主题的安装与配置 整理自stack主题官方文档以及相关的技术博客\n丐版的网页显然不能直接用，因为实在是太粗糙了，甚至比不上我自己写的网页。\n所以我们需要挑选一个合适的hugo主题——hugo-theme-stack出场（此处有bgm）！\n这款主题可以说，既能简约，又能做得比较华丽，可DIY性可以说是比较强的了，配色还十分合我的胃口，那么就是它了！\n安装Stack主题 我们从Github代码仓库把它拷过来，放入/theme目录下\n1 2 $ git init $ git submodule add https://github.com/CaiJimmy/hugo-theme-stack/ themes/hugo-theme-stack 直接进行git clone的话之后在GithubPage配置的时候好像会出现问题，因此我推荐在这里使用git submodule add来代替git cone\n然后把theme/hugo-theme-stack/exampleSite目录底下的所有文件复制到网站的根目录下。这里我们会发现根目录下有config.toml和config.yaml两个配置文件。在功能上，这两者没什么区别，都是用于配置的，只不过语法略有些差异。在这里，我们删除config.toml，留下config.yaml。\n这个时候再在命令行中重新运行$ hugo server即可看到stack主题的网站啦！下面就是属于自己的DIY时间了！\n配置stack主题 接下来的配置就是将自己个性化的东西放上去，比如网页的favicon，自己的头像和个性签名，以及menu bar的内容等等。此外，我删除了评论功能，因为感觉个人博客不太需要交互。\n话不多说，直接上我的配置：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 baseurl: https://blog.electronicwaste.cn languageCode: zh-cn theme: hugo-theme-stack paginate: 5 title: Electronic-Waste的博客 languages: zh-cn: languageName: 中文 title: Electronic-Waste的博客 description: 欢迎常来看看！！！ weight: 1 # en: # languageName: English # title: Electronic-Waste\u0026#39;s Blog # description: Welcome!!! # weight: 2 # Change it to your Disqus shortname before using disqusShortname: hugo-theme-stack # GA Tracking ID googleAnalytics: # Theme i18n support # Available values: ar, bn, ca, de, el, en, es, fr, hu, id, it, ja, ko, nl, pt-br, th, uk, zh-cn, zh-hk, zh-tw DefaultContentLanguage: zh-cn # Set hasCJKLanguage to true if DefaultContentLanguage is in [zh-cn ja ko] # This will make .Summary and .WordCount behave correctly for CJK languages. hasCJKLanguage: true permalinks: post: /p/:slug/ page: /:slug/ params: mainSections: - post featuredImageField: image rssFullContent: true favicon: /img/favicon.ico footer: since: 2022 customText: dateFormat: published: Jan 02, 2006 lastUpdated: Jan 02, 2006 15:04 MST sidebar: emoji: 🍥 subtitle: 人生不得行胸臆，纵年百岁尤为夭 avatar: enabled: true local: true src: img/avatar.jpg article: math: false toc: true readingTime: true license: enabled: true default: Licensed under CC BY-NC-SA 4.0 widgets: homepage: - type: search - type: archives params: limit: 5 - type: categories params: limit: 10 - type: tag-cloud params: limit: 10 page: - type: toc # opengraph: # twitter: # # Your Twitter username # site: # # Available values: summary, summary_large_image # card: summary_large_image defaultImage: opengraph: enabled: false local: false src: colorScheme: # Display toggle toggle: true # Available values: auto, light, dark default: auto imageProcessing: cover: enabled: true content: enabled: true ### Custom menu ### See https://docs.stack.jimmycai.com/configuration/custom-menu.html ### To remove about, archive and search page menu item, remove `menu` field from their FrontMatter menu: main: [] social: - identifier: github name: GitHub url: https://github.com/Electronic-Waste params: icon: brand-github - identifier: zhihu name: Zhihu url: https://www.zhihu.com/people/zhong-hua-yi-diao-si params: icon: zhihu - identifier: mail name: Gmail url: mailto:shaowang2002@gmail.com params: icon: mail related: includeNewer: true threshold: 60 toLower: false indices: - name: tags weight: 100 - name: categories weight: 200 markup: goldmark: renderer: ## Set to true if you have HTML content inside Markdown unsafe: false tableOfContents: endLevel: 4 ordered: true startLevel: 2 highlight: noClasses: false codeFences: true guessSyntax: true lineNoStart: 1 lineNos: true lineNumbersInTable: true tabWidth: 4 具体各个参数的含义参见官方文档\n非常坑爹的一点发生在我设置favicon的时候，官方文档描述得实在是太简略了：\n当我照着上面的做，把favicon.ico直接放在了static目录下是，我却发现不管我再怎么刷新网页，再怎么重启hugo service，都没有办法生成网页图标（当时的内心是崩溃的）。在翻了无数资料之后，我才在Github Issue中的一个小角落发现了这个问题的解决方案——在/static文件夹中新建一级目录，将与favicon.ico有关的所有文件全部放入这个目录，并且更改config.yaml中的params.favicon项。到此才算完成了网页样式的个性化定制，cheers!\n另外，推荐一个生成favicon的网站——realfavicongenerator。使用体验极佳，而且全免费。\nGithubPage GithubPage的配置十分简单：\n在Github新建一个以\u0026lt;YOUR_GITHUB_USERNAME\u0026gt;.github.io命名的仓库 在本地网页根目录下新建.github/workflows/gh-pages.yml文件，文件具体内容如下 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 name: github pages on: push: branches: - main # Set a branch that will trigger a deployment pull_request: jobs: deploy: runs-on: ubuntu-22.04 steps: - uses: actions/checkout@v3 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: \u0026#39;latest\u0026#39; extended: true # Attention: this is set when the extented version of hugo is needed - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 if: github.ref == \u0026#39;refs/heads/main\u0026#39; with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public 将本地文件config.yaml中的baseurl设置成\u0026lt;YOUR_GITHUB_USERNAME\u0026gt;.github.io 将本地仓库git push到远端main的分支，让Github Action来构建网页 在仓库中的\u0026quot;Settings\u0026quot;-\u0026gt;\u0026ldquo;Code and automation\u0026rdquo;-\u0026gt;\u0026ldquo;Pages\u0026quot;页中将\u0026quot;Branch\u0026quot;改成\u0026quot;gh-pages\u0026rdquo; 阿里云 起初我以为搭建网站需要一台云服务器，于是和阿里云斗智斗勇，做了几个任务，白嫖了7个月的学生机——2核2GB内存的ECS，远在华北的乌兰察布。\n但是后来直到我配置完成才发现貌似根本不需要云服务器，这下小丑竟是我自己了🤡\n不过反正是免费的，无所谓了哈哈哈，下次换腾讯云/华为云/AWS白嫖。\n购买域名 在工作台中进入“域名”选项，选择“注册域名”，然后根据提示选择自己喜欢的域名即可\n我选的是electronicwaste.cn，花了我29块大洋，有点小贵😭，够我在玉兰苑大吃一顿麻辣烫了\n之后可能要对域名进行实名认证（这个不是备案），然后激活这个域名，整个过程不超过10min，阿里云在这点上还是非常给力的😋\n域名解析 看到网上有很多教程说要去工信部ICP备案，但我发现好像不用？\nGithub的服务器在国外，因此为GithubPage添加域名解析时不用进行备案。只要我不被当成“境外势力”“50W”打掉就行了🐶，在实操过程中这种个人博客“相关部门”一般不会管，因此简单配置一下域名解析就好了：\n这样我们马上就可以使用blog.electronicwaste.cn访问我的博客啦！\nGithubPage以及相关配置更新 更改config.yaml中的baseurl为blog.electronicwaste.cn（请把这个域名改成你自己配置的那一个，下面步骤中不再复述） 在/static目录下增加一个CNAME文件，将blog.electronicwaste.cn写入即可 将本地代码仓库的代码git push到Github中 在Github的仓库中\u0026quot;Settings\u0026quot;-\u0026gt;\u0026ldquo;Code and automation\u0026rdquo;-\u0026gt;\u0026ldquo;Pages\u0026quot;页中将\u0026rsquo;Enforce HTTPS\u0026quot;选中 大功告成！你现在可以用blog.electronicwaste.cn来访问博客了！🍻 文章内容的撰写 详情见Stack主题官方文档以及Hugo官方文档。\n建议在完全了解Hugo Site文件架构以及页面显示的关系之后再开始修改目录和文章。因为这篇博客的主要内容是讲如何配置搭建博客的，所以如何去撰写自己的博客文章就要大家自己去摸索了。\n此外，要重视官方文档。官方文档虽然有些地方写得很简略而且会有bug，但是无论在内容的丰富程度上还是准确程度上，都是吊打CSDN的一些技术博客的（当然也包括我的博客）。\n也可以将官方的示例代码和Demo拿来看，这样子上手会快很多。\n好好摸索吧！骚年！\n一些感想\u0026amp;吐槽 搭建博客的过程并不是一帆风顺的，我前前后后大概花了三四天的时间，中间踩了很多的坑。\n最崩溃的时候莫过于遇上favicon那个奇奇怪怪的Bug的时候。官方文档里面的内容少之又少，给的配置还是错的，我当时完全不知道该怎么办了。虽说stack这个theme比较火，但是网上的参考资料还是少之又少，根本无从下手解决。而且本人有强迫症🤡，虽然没有这个图标网页照样能跑，但是丑陋的默认图标让我异常难受。我的强迫症不容许它的存在！\n在经历了一下午的痛苦与折磨之后，我终于在某个犄角旮旯里找到了这个问题的解决方法，也就是前文中提到的Github Issue，真的有一种“柳暗花明又一村”的感觉。\n不过，看到自己的博客网站在自己一点一点的努力中逐渐搭建成型，我还是非常开心非常有成就感的！而且这个过程也十分有意义，因为在此之前我一有什么问题就直接Bing找各种博客看，如果找不到就直接摆烂🤡。但是这一次，我会静下心来去研究官方文档，跑官方给的例子，去官方的Github仓库里去看代码和别人提的issues了。怎么说，感觉自己还是有很大进步的！\n最后，这个网站终于能完整而优雅地跑起来了。欢迎大家常来看看，也欢迎大家多提提建议呀！\n","date":"2023-01-20T00:00:00Z","permalink":"https://blog.electronicwaste.cn/p/%E5%88%A9%E7%94%A8hugo-githubpage-%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E4%BF%9D%E5%A7%86%E7%BA%A7%E6%95%99%E7%A8%8B/","title":"利用Hugo+GithubPage+阿里云搭建博客网站（保姆级教程）"}]